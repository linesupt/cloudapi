<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.lineying.mapper.MaterialClassMapper">
    <!-- 新增食材分類 -->
    <insert id="addMaterialClass" parameterType="com.lineying.entity.MaterialClassEntity">
        insert into material_class(id,code,name,
        thumb_image_url,is_liquid,health_light,weight,
        calory,fat,protein,fiber_dietary,carbohydrate,
        carotene,vitamin_a,vitamin_b1,vitamin_b2,
        thiamine,lactoflavin,vitamin_c,vitamin_e,
        niacin,natrium,calcium,iron,kalium,
        iodine,zinc,selenium,magnesium,copper,
        manganese,cholesterol,main_class_id,create_time)
        values(#{id},#{code},#{name},
        #{thumb_image_url},#{is_liquid},#{health_light},#{weight},
        #{calory},#{fat},#{protein},#{fiber_dietary},#{carbohydrate},
        #{carotene},#{vitamin_a},#{vitamin_b1},#{vitamin_b2},
        #{thiamine},#{lactoflavin},#{vitamin_c},#{vitamin_e},
        #{niacin},#{natrium},#{calcium},#{iron},#{kalium},
        #{iodine},#{zinc},#{selenium},#{magnesium},#{copper},
        #{manganese},#{cholesterol},#{main_class_id},now())
    </insert>
    <!-- 查询食材主分类 -->
    <select id="selectMaterialMainClass" resultType="com.lineying.entity.MaterialMainClass">
        select id,name,create_time
        FROM material_main_class
    </select>
    <!-- 查询食材分页 -->
    <select id="selectMaterialPage" parameterType="java.util.Map" resultType="com.lineying.entity.MaterialClassEntity">
        select id,code,name,is_liquid,health_light,weight,calory,
        fat,protein,fiber_dietary,carbohydrate,carotene,
        vitamin_a,vitamin_b1,vitamin_b2,thiamine,lactoflavin,
        vitamin_c,vitamin_e,niacin,natrium,calcium,iron,
        kalium,iodine,zinc,selenium,magnesium,copper,
        manganese,cholesterol,main_class_id,create_time
        FROM material_class
        <where>
            <if test="classId != null and classId !='' ">
                and main_class_id = #{classId}
            </if>
            <if test="materialName != null and materialName !='' ">
                and name like concat("%",#{materialName},"%")
            </if>
            <if test="orderByAttr != null and orderByAttr != ''">
                order by ${orderByAttr} ${type}
            </if>
        </where>
    </select>
    <!-- 动态排序 -->
    <!-- <select id="selectMaterialPageOrderBy"  parameterType="java.util.Map" resultType="com.lineying.entity.MaterialClassEntity">
        select id,code,name,health_light,thumb_image_url,
               weight,calory,main_class_id
        FROM material_class
        where main_class_id = #{classId}
        <if test="orderByAttr != null and orderByAttr != ''">
            order by ${orderByAttr} ${type}
        </if>
    </select> -->
</mapper>